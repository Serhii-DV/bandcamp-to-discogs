{"version":3,"file":"bandcamp-content.js","mappings":"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","sources":["webpack:///./src/modules/utils.js","webpack:///./src/bandcamp/app/page-type.js","webpack:///./src/config.js","webpack:///./node_modules/uuid/dist/esm-browser/stringify.js","webpack:///./node_modules/uuid/dist/esm-browser/regex.js","webpack:///./node_modules/uuid/dist/esm-browser/parse.js","webpack:///./node_modules/uuid/dist/esm-browser/validate.js","webpack:///./node_modules/uuid/dist/esm-browser/sha1.js","webpack:///./node_modules/uuid/dist/esm-browser/v5.js","webpack:///./node_modules/uuid/dist/esm-browser/v35.js","webpack:///./src/modules/key-generator.js","webpack:///./src/app/trackTime.js","webpack:///./src/app/release.js","webpack:///./src/modules/chrome.js","webpack:///./src/discogs/modules/discogs.js","webpack:///./src/modules/html.js","webpack:///./src/bandcamp/modules/html.js","webpack:///./src/modules/storage.js","webpack:///./src/bandcamp/pages/page-album.js","webpack:///./src/bandcamp/modules/main.js","webpack:///./src/bandcamp/pages/page-music.js"],"sourcesContent":["/**\n * @param {String} string\n * @param {String} pad\n * @param {Number} length\n * @returns {String}\n */\nexport function padStringLeft(string, pad, length) {\n  const padding = string.length >= length ? '' : pad.repeat(length - string.length);\n  return padding + string;\n}\n\n/** @see https://stackoverflow.com/a/8485137/3227570 */\nexport function safeFilename(value) {\n  return transliterate(value).replace(/[^a-zA-Z0-9]/gi, '_').toLowerCase();\n}\n\n/** @see https://stackoverflow.com/a/11404121 */\nconst transliterationMap = {\n  \"Ё\": \"YO\", \"Й\": \"I\", \"Ц\": \"TS\", \"У\": \"U\", \"К\": \"K\", \"Е\": \"E\", \"Н\": \"N\", \"Г\": \"G\", \"Ш\": \"SH\", \"Щ\": \"SCH\", \"З\": \"Z\", \"Х\": \"H\", \"Ъ\": \"'\", \"ё\": \"yo\", \"й\": \"i\", \"ц\": \"ts\", \"у\": \"u\", \"к\": \"k\", \"е\": \"e\", \"н\": \"n\", \"г\": \"g\", \"ш\": \"sh\", \"щ\": \"sch\", \"з\": \"z\", \"х\": \"h\", \"ъ\": \"'\", \"Ф\": \"F\", \"Ы\": \"I\", \"В\": \"V\", \"А\": \"A\", \"П\": \"P\", \"Р\": \"R\", \"О\": \"O\", \"Л\": \"L\", \"Д\": \"D\", \"Ж\": \"ZH\", \"Э\": \"E\", \"ф\": \"f\", \"ы\": \"i\", \"в\": \"v\", \"а\": \"a\", \"п\": \"p\", \"р\": \"r\", \"о\": \"o\", \"л\": \"l\", \"д\": \"d\", \"ж\": \"zh\", \"э\": \"e\", \"Я\": \"Ya\", \"Ч\": \"CH\", \"С\": \"S\", \"М\": \"M\", \"И\": \"I\", \"Т\": \"T\", \"Ь\": \"'\", \"Б\": \"B\", \"Ю\": \"YU\", \"я\": \"ya\", \"ч\": \"ch\", \"с\": \"s\", \"м\": \"m\", \"и\": \"i\", \"т\": \"t\", \"ь\": \"'\", \"б\": \"b\", \"ю\": \"yu\"\n};\n\nfunction transliterate(word) {\n  return Array.from(word).map(char => transliterationMap[char] || char).join(\"\");\n}\n\n/** @see https://flexiple.com/javascript/javascript-capitalize-first-letter/ */\nexport function capitalizeEachWord(str) {\n  const words = str.split(\" \");\n\n  const capitalizedWords = words.map(word => {\n    const firstLetter = word.charAt(0).toUpperCase();\n    const restOfWord = word.slice(1);\n    return `${firstLetter}${restOfWord}`;\n  });\n\n  return capitalizedWords.join(\" \");\n}\n\nexport function convertToAlias(str) {\n  const slug = str.toLowerCase().replace(/[^a-z0-9]+/g, '-');\n  const trimmedSlug = slug.replace(/^-+|-+$/g, '');\n  return trimmedSlug;\n}\n\nexport function isEmptyObject(obj) {\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function isString(value) {\n  return typeof value === 'string';\n}\n\nexport function isObject(value) {\n  return Object.prototype.toString.call(value) === '[object Object]';\n}\n\nexport function isArray(value) {\n  return Array.isArray(value);\n}\n\nexport function isFunction(value) {\n  return typeof value === 'function';\n}\n\n/**\n * @param {Array} value\n * @returns {Boolean}\n */\nexport function isEmptyArray(value) {\n  return !isArray(value) || value.length === 0;\n}\n\n/**\n * @param {Array<Array<String>>}\n * @return {Array<String>}\n */\nexport function arrayToFlat(arr) {\n  return [].concat(...arr);\n}\n\n/**\n * @param {Array<Array<String>|String>}\n * @return {Array<String>}\n */\nexport function arrayUnique(arr) {\n  return [...new Set(arrayToFlat(arr))];\n}\n\n/**\n * @param {Element} element\n * @param {String} className\n * @returns {Boolean}\n */\nexport function hasClass(element, className) {\n  return element.classList.contains(className);\n}\n\n/**\n * @param {String} url\n * @param {Element} targetElement\n * @returns {Promise}\n */\nexport function loadHTMLContent(url, targetElement) {\n  return fetch(url)\n      .then(response => response.text())\n      .then(htmlContent => {\n          targetElement.innerHTML = htmlContent;\n          return targetElement;\n      })\n      .catch(error => console.error('Error loading HTML content:', error));\n}\n\n/**\n * Replace tokens in a template string with their corresponding values.\n * @param {string} template - The template string with tokens to be replaced.\n * @param {object} replacements - An object containing key-value pairs for replacements.\n * @returns {string} - The template string with tokens replaced by their values.\n */\nexport function replaceTokens(template, replacements) {\n  for (const key in replacements) {\n    if (replacements.hasOwnProperty(key)) {\n      template = template.replace(`{${key}}`, replacements[key]);\n    }\n  }\n  return template;\n}\n\n/**\n * @param {String} cssUrl\n */\nexport function injectCSSFile(cssUrl) {\n  const linkElement = document.createElement('link');\n  linkElement.rel = 'stylesheet';\n  linkElement.href = cssUrl;\n\n  document.head.appendChild(linkElement);\n}\n\nexport function injectJSFile(url, callback) {\n  const s = window.document.createElement('script');\n  s.src = url;\n  s.onload = isFunction(callback) ? callback() : () => { console.log(`B2D: Script ${url} was injected!`); };\n  (document.head||document.documentElement).appendChild(s);\n}\n\n/**\n * @param {String} inputString\n * @param {RegExp|String} delimiters\n * @returns {Array}\n */\nexport function splitString(inputString, delimiters) {\n  const resultArray = inputString.split(delimiters);\n  return resultArray\n    .map(item => item.trim())\n    .filter(item => item !== '');\n}\n\nexport function containsOneOf(string1, arrayOfStrings) {\n  // This function checks if a string contains one of the strings in an array of strings.\n\n  // Args:\n  //   string1: The string to check.\n  //   arrayOfStrings: The array of strings to look for.\n\n  // Returns:\n  //   True if string1 contains one of the strings in arrayOfStrings, False otherwise.\n\n  for (const string2 of arrayOfStrings) {\n    if (string1.includes(string2)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function countOccurrences(arr) {\n  const count = new Map();\n  const items = new Map();\n  const result = [];\n\n  // Count occurrences of each element in the array\n  for (const item of arr) {\n      const key = item.toLowerCase();\n\n      if (!items.has(key)) {\n        items.set(key, item);\n      }\n\n      count.set(key, (count.get(key) || 0) + 1);\n  }\n\n  for (const [key, item] of items) {\n    const value = count.get(key);\n    if (value > 1) {\n      result.push(`${item} (${value})`);\n    } else {\n      result.push(item);\n    }\n  }\n\n  return result;\n}\n\nexport function removeBrackets(inputString) {\n  // Use a regular expression to remove the brackets and their contents\n  return inputString.replace(/\\s*\\([^)]*\\)/, '');\n}\n\nexport function trimCharactersFromString(inputString, charactersToTrim) {\n  // Escape special characters within the provided string and construct the regex pattern\n  const escapedCharacters = charactersToTrim.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n  const regexPattern = new RegExp(`^[${escapedCharacters}]+|[${escapedCharacters}]+$`, 'g');\n  const trimmedString = inputString.replace(regexPattern, '');\n\n  return trimmedString;\n}\n\nexport function removeInvisibleChars(inputString) {\n  // Define the invisible character(s) you want to remove (for example, non-breaking space)\n  const invisibleCharsRegex = /[\\u200B-\\u200D\\uFEFF\\u200E\\u200F\\u202A-\\u202E]|&lrm;/g;\n  // Use the regular expression to remove invisible characters\n  const cleanedString = inputString.replace(invisibleCharsRegex, '');\n\n  return cleanedString;\n}\n\nexport function bytesToSize(bytes) {\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n\n  if (bytes === 0) return '0 Byte';\n\n  const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n  return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];\n}\n\nexport function removeLeadingZeroOrColon(str) {\n  // Use a regular expression to match leading zeros or colons\n  // and replace them with an empty string\n  return str.replace(/^(:|0)*/, '');\n}\n","const PageTypeEnum = {\n  ALBUM: 'album',\n  ARTISTS: 'artists',\n  COMMUNITY: 'community',\n  MERCH: 'merch',\n  MUSIC: 'music',\n  TRACK: 'track',\n  VIDEO: 'video',\n  UNKNOWN: 'unknown'\n};\n\nexport class PageType {\n  constructor(value) {\n    this.value = value;\n  }\n\n  isAlbum = () => this.value === PageTypeEnum.ALBUM;\n  isArtists = () => this.value === PageTypeEnum.ARTISTS;\n  isCommunity = () => this.value === PageTypeEnum.COMMUNITY;\n  isMerch = () => this.value === PageTypeEnum.MERCH;\n  isMusic = () => this.value === PageTypeEnum.MUSIC;\n  isTrack = () => this.value === PageTypeEnum.TRACK;\n  isVideo = () => this.value === PageTypeEnum.VIDEO;\n  isUnknow = () => this.value === PageTypeEnum.UNKNOWN;\n}\n\nexport class PageTypeDetector {\n  constructor() {\n    this.url = window.location.href;\n  }\n\n  detect = () => {\n    const self = this;\n    let value = PageTypeEnum.UNKNOWN;\n\n    if (self.isAlbum()) {\n      value = PageTypeEnum.ALBUM;\n    } else if (self.isArtists()) {\n      value = PageTypeEnum.ARTISTS;\n    } else if (self.isCommunity()) {\n      value = PageTypeEnum.COMMUNITY;\n    } else if (self.isMusic()) {\n      value = PageTypeEnum.MUSIC;\n    } else if (self.isMerch()) {\n      value = PageTypeEnum.MERCH;\n    } else if (self.isTrack()) {\n      value = PageTypeEnum.TRACK;\n    } else if (self.isVideo()) {\n      value = PageTypeEnum.VIDEO;\n    }\n\n    return new PageType(value);\n  }\n\n  isAlbum = () => this.url.includes('/album/');\n  isArtists = () => this.url.includes('/artists/') || !!document.querySelector('.artists-grid');\n  isCommunity = () => this.url.includes('/community/');\n  isMerch = () => this.url.includes('/merch/');\n  isMusic = () => this.url.includes('/music/') || !!document.querySelector('#music-grid');\n  isTrack = () => this.url.includes('/track/');\n  isVideo = () => this.url.includes('/video/');\n}\n","export default {\n  // genres_url: 'https://gist.githubusercontent.com/Serhii-DV/14d7ec13fd15e30db1a2a8dff047abbf/raw/discogs_genres_and_styles.json',\n  genres_url: '../data/discogs_genres.json',\n  // keyword_mapping_url: '../data/keyword_mapping.json',\n  keyword_mapping_url: 'https://gist.githubusercontent.com/Serhii-DV/44181f307548aabac2703147d3c730ba/raw/mapping.json',\n  about_url: '../data/about.html',\n  extension_url: 'https://chrome.google.com/webstore/detail/bandcamp-to-discogs-b2d/hipnkehalkffbdjnbbeoefmoondaciok',\n  discogs_search_artist_url: 'https://www.discogs.com/search?q={artist}&type=artist',\n  discogs_search_release_url: 'https://www.discogs.com/search?q={artist}+{release}&type=release',\n  text: {\n    // Submission notes text\n    notes: 'This draft was created via CSV upload and Bandcamp To Discogs Google Chrome extension {extension_url}\\n\\nRelease url: {release_url}'\n  },\n  discogsApi: {\n    consumerKey: 'TJGtBNerXwCzYvFCQXSD',\n  }\n};\n","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  let v;\n  const arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  const K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  const H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    const msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (let i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  const l = bytes.length / 4 + 2;\n  const N = Math.ceil(l / 16);\n  const M = new Array(N);\n\n  for (let i = 0; i < N; ++i) {\n    const arr = new Uint32Array(16);\n\n    for (let j = 0; j < 16; ++j) {\n      arr[j] = bytes[i * 64 + j * 4] << 24 | bytes[i * 64 + j * 4 + 1] << 16 | bytes[i * 64 + j * 4 + 2] << 8 | bytes[i * 64 + j * 4 + 3];\n    }\n\n    M[i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (let i = 0; i < N; ++i) {\n    const W = new Uint32Array(80);\n\n    for (let t = 0; t < 16; ++t) {\n      W[t] = M[i][t];\n    }\n\n    for (let t = 16; t < 80; ++t) {\n      W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);\n    }\n\n    let a = H[0];\n    let b = H[1];\n    let c = H[2];\n    let d = H[3];\n    let e = H[4];\n\n    for (let t = 0; t < 80; ++t) {\n      const s = Math.floor(t / 20);\n      const T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nconst v5 = v35('v5', 0x50, sha1);\nexport default v5;","import { unsafeStringify } from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function v35(name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    var _namespace;\n\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    let bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return unsafeStringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import { v5 as uuid5} from 'uuid';\nimport { Release } from '../app/release.js';\n\n/**\n * @param {String} url\n * @returns {String}\n */\nexport function generateKeyForUrl(url) {\n  const uuid = uuid5(url, uuid5.URL);\n  // console.log(`B2D: uuid5(${url}): `, uuid);\n  return uuid;\n}\n\n/**\n * @param {ReleaseItem} releaseItem\n * @return {String}\n */\nexport function generateKeyForReleaseItem(releaseItem) {\n  return generateKeyForUrl(releaseItem.url);\n}\n\n/**\n * @param {Release} release\n * @return {String}\n */\nexport function generateKeyForRelease(release) {\n  return generateKeyForReleaseItem(release.releaseItem);\n}\n\nexport function generateKeysFromUrls(urls) {\n  const keys = [];\n  urls.forEach(url => keys.push(generateKeyForUrl(url)));\n  return keys;\n}\n\nexport function generateKeyUrlMapFromUrls(urls) {\n  const keyUrlMap = {};\n\n  urls.forEach(url => {\n    const key = generateKeyForUrl(url);\n    keyUrlMap[key] = url;\n  });\n\n  return keyUrlMap;\n}\n","class TrackTime {\n  /**\n   * @type {Number}\n   */\n  #hours;\n\n  /**\n   * @type {Number}\n   */\n  #minutes;\n\n  /**\n   * @type {Number}\n   */\n  #seconds;\n\n  /**\n   * Constructs a Time object with hours, minutes, and seconds.\n   * @param {number} hours - The hours component of the time.\n   * @param {number} minutes - The minutes component of the time.\n   * @param {number} seconds - The seconds component of the time.\n   */\n  constructor(hours, minutes, seconds) {\n      this.#hours = hours;\n      this.#minutes = minutes;\n      this.#seconds = seconds;\n  }\n\n  get value() {\n    return this.toString();\n  }\n\n  get date() {\n    return this.toDate();\n  }\n\n  /**\n   * Returns a string representation of the duration in the format \"HH:MM:SS\".\n   * @returns {string} String representation of the duration.\n   */\n  toString() {\n    const formatter = new Intl.DateTimeFormat('en', {\n      hour12: false,\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n    });\n\n    return formatter.format(this.toDate());\n  }\n\n  toDate() {\n    const date = new Date(0);\n    date.setHours(this.#hours);\n    date.setMinutes(this.#minutes);\n    date.setSeconds(this.#seconds);\n\n    return date;\n  }\n\n  /**\n   * Parses a time string in the format HH:MM:SS and returns an object with hours, minutes, and seconds.\n   * Throws an error if the input string is not in the valid time format.\n   *\n   * @param {string} timeString - The time string to parse, expected in the format HH:MM:SS.\n   * @returns {TrackTime} A Time object containing the parsed hours, minutes, and seconds as numbers.\n   * @throws {Error} Throws an error if the input string is not in the valid time format HH:MM:SS.\n   */\n  static fromString(timeString) {\n    // Regular expression to match HH:MM:SS format\n    const timeFormat = /^([01]\\d|2[0-3]):([0-5]\\d):([0-5]\\d)$/;\n\n    if (!timeFormat.test(timeString)) {\n        throw new Error(\"Invalid time format. Please use HH:MM:SS.\");\n    }\n\n    const [hours, minutes, seconds] = timeString.split(':');\n\n    return new TrackTime(\n      parseInt(hours, 10),\n      parseInt(minutes, 10),\n      parseInt(seconds, 10)\n    );\n  }\n\n  /**\n   * Creates a Duration instance from a duration string.\n   * The duration string should be in the format \"XHYMZS\",\n   * where X is hours, Y is minutes, and Z is seconds.\n   * See: https://en.wikipedia.org/wiki/ISO_8601\n   * @param {string} duration\n   * @returns {TrackTime}\n   */\n  static fromDuration(duration) {\n    const regexHours = /(\\d+)H/;\n    const regexMinutes = /(\\d+)M/;\n    const regexSeconds = /(\\d+)S/;\n    const hours = (regexHours.exec(duration) || [])[1] || 0;\n    const minutes = (regexMinutes.exec(duration) || [])[1] || 0;\n    const seconds = (regexSeconds.exec(duration) || [])[1] || 0;\n\n    return new TrackTime(\n      parseInt(hours, 10),\n      parseInt(minutes, 10),\n      parseInt(seconds, 10)\n    );\n  }\n}\n\nexport default TrackTime;\n","import { generateSubmissionNotes } from '../discogs/modules/discogs.js';\nimport { getExtensionManifest } from '../modules/chrome.js';\nimport { generateKeyForUrl } from '../modules/key-generator.js';\nimport TrackTime from './trackTime.js';\n\nexport class ReleaseItem {\n  constructor(url, artist, title) {\n    this.url = url;\n    this.artist = artist;\n    this.title = title;\n    this.uuid = generateKeyForUrl(url);\n  }\n\n  static fromObject(obj) {\n    return new ReleaseItem(obj.url, obj.artist, obj.title);\n  }\n}\n\nexport class Release {\n  /**\n   * @type {ReleaseItem}\n   */\n  releaseItem;\n\n  /**\n   * @type {string}\n   */\n  label;\n\n  /**\n   * @type {Date}\n   */\n  published;\n\n  /**\n   * @type {Date}\n   */\n  modified;\n\n  /**\n   * @type {Array.<Track>}\n   */\n  tracks;\n\n  /**\n   * @type {Number}\n   */\n  tracksQty;\n\n  /**\n   * @type {string}\n   */\n  image;\n\n  /**\n   * @type {Array.<string>}\n   */\n  keywords;\n\n  /**\n   * @param {string} artist\n   * @param {string} title\n   * @param {string} label\n   * @param {Date} datePublished\n   * @param {Date} dateModified\n   * @param {Array.<Track>} tracks\n   * @param {string} url\n   * @param {string} image\n   * @param {Array.<string>} keywords\n   */\n  constructor(artist, title, label, datePublished, dateModified, tracks, url, image, keywords) {\n    this.releaseItem = new ReleaseItem(url, artist, title);\n    this.label = label;\n    this.published = datePublished;\n    this.modified = dateModified;\n    this.tracks = tracks;\n    this.tracksQty = tracks.length;\n    this.image = image;\n    this.keywords = keywords;\n  }\n\n  get artist() {\n    return this.releaseItem.artist;\n  }\n\n  get url() {\n    return this.releaseItem.url;\n  }\n\n  get title() {\n    return this.releaseItem.title;\n  }\n\n  toStorageObject() {\n    return {\n      uuid: this.releaseItem.uuid,\n      artist: this.releaseItem.artist,\n      title: this.releaseItem.title,\n      url: this.releaseItem.url,\n      label: this.label,\n      published: this.published.toISOString(),\n      modified: this.modified.toISOString(),\n      tracks: this.tracks.map(track => track.toStorageObject()),\n      image: this.image,\n      keywords: this.keywords\n    };\n  }\n\n  /**\n   * Create an instance of the Release class from the object.\n   * @param {Object} obj - A simple object.\n   * @returns {Release} An instance of the Release class.\n   */\n  static fromStorageObject(obj) {\n    if (!obj.url || !obj.tracks) {\n      throw new Error('Cannot create Release object from object', obj);\n    }\n\n    const tracks = obj.tracks.map(trackData => Track.fromStorageObject(trackData));\n\n    if (!obj.published && !obj.date) {\n      throw new Error(\"Missing published or date property\");\n    }\n\n    if (!obj.modified && !obj.date) {\n      throw new Error(\"Missing published or date property\");\n    }\n\n    return new Release(\n      obj.artist,\n      obj.title,\n      obj.label,\n      new Date(obj.published ?? obj.date),\n      new Date(obj.modified ?? obj.date),\n      tracks,\n      obj.url,\n      obj.image,\n      obj.keywords\n    );\n  }\n\n  /**\n   * Returns release metadata\n   * @param {Release} release\n   * @returns Object\n   */\n  toMetadata() {\n    const manifest = getExtensionManifest();\n    return {\n      version: manifest.version,\n      format: {\n        qty: this.tracksQty,\n        fileType: 'FLAC',\n        description: 'Album'\n      },\n      submissionNotes: generateSubmissionNotes(this)\n    };\n  }\n}\n\nexport class Track {\n  /**\n   * @type {String}\n   */\n  num;\n\n  /**\n   * @type {String}\n   */\n  title;\n\n  /**\n   * @type {TrackTime}\n   */\n  time;\n\n  /**\n   * @param {String} num\n   * @param {String} title\n   * @param {TrackTime} time\n   */\n  constructor(num, title, time) {\n    this.num = num;\n    this.title = title;\n    this.time = time;\n  }\n\n  toStorageObject() {\n    return {\n      num: this.num,\n      title: this.title,\n      time: this.time.value\n    };\n  }\n\n  /**\n   * Create an instance of the Track class from the object.\n   * @param {Object} obj - A simple object.\n   * @returns {Track} An instance of the Track class.\n   */\n  static fromStorageObject(obj) {\n    return new Track(\n      obj.num,\n      obj.title,\n      TrackTime.fromString(obj.time || obj.duration)\n    );\n  }\n}\n","import { isFunction } from \"./utils.js\";\n\nexport async function getCurrentTab(callback) {\n  let queryOptions = { active: true, currentWindow: true };\n\n  if (isFunction(callback)) {\n    chrome.tabs.query(queryOptions, callback);\n    return;\n  }\n\n  let [tab] = await chrome.tabs.query(queryOptions);\n  return tab;\n};\n\nexport function getExtensionManifest() {\n  const manifest = chrome.runtime.getManifest();\n  return manifest;\n}\n\nexport async function openTabs(urls, callback) {\n  const tabPromises = [];\n\n  for (const url of urls) {\n    const tabPromise = new Promise((resolve) => {\n      chrome.tabs.create({ url, active: false }, (tab) => {\n        if (callback) {\n          callback(tab);\n        }\n        resolve(tab);\n      });\n    });\n\n    tabPromises.push(tabPromise);\n  }\n\n  return Promise.all(tabPromises);\n}\n\nexport function getExtensionUrl(path) {\n  return chrome.runtime.getURL(path);\n}\n","import { DiscogsCsv } from \"../app/discogs-csv.js\";\nimport { Release } from \"../../app/release.js\";\nimport config from \"../../config.js\";\nimport { replaceTokens } from \"../../modules/utils.js\";\n\n/**\n * @param {Release} release\n * @returns {DiscogsCsv}\n */\nexport function releaseToDiscogsCsv(release) {\n  return DiscogsCsv.fromRelease(release);\n}\n\nexport function getSearchDiscogsArtistUrl(artist) {\n  return replaceTokens(config.discogs_search_artist_url, {artist: artist});\n}\n\nexport function getSearchDiscogsReleaseUrl(artist, release) {\n  return replaceTokens(config.discogs_search_release_url, {artist: artist, release: release});\n}\n\n/**\n * @param {Release} release\n * @returns {String}\n */\nexport function generateSubmissionNotes(release) {\n  return replaceTokens(config.text.notes, {\n    extension_url: config.extension_url,\n    release_url: release.releaseItem.url\n  });\n}\n","import { isArray, isString } from \"./utils.js\";\n\nexport function hasDataAttribute(element, attributeName) {\n  return element.hasAttribute(`data-${attributeName}`);\n}\n\nexport function setDataAttribute(element, attributeName, attributeValue = '') {\n  element.setAttribute(`data-${attributeName}`, attributeValue);\n}\n\nexport function getDataAttribute(element, attributeName, defaultValue = undefined) {\n  return hasDataAttribute(element, attributeName) ? element.getAttribute(`data-${attributeName}`) : defaultValue;\n}\n\nexport function show(...element) {\n  element.forEach(el => isArray(el) ? show(...el) : el.classList.remove('visually-hidden'));\n}\n\nexport function hide(...element) {\n  element.forEach(el => isArray(el) ? hide(...el) : el.classList.add('visually-hidden'));\n}\n\nexport function disable(...element) {\n  element.forEach(el => isArray(el) ? disable(...el) : (el.disabled = true));\n}\n\nexport function enable(...element) {\n  element.forEach(el => isArray(el) ? enable(...el) : (el.disabled = false));\n}\n\n/**\n * Triggers click event on the element\n * @param {Element} element\n */\nexport function click(element) {\n  var event = new MouseEvent(\"click\", {\n      bubbles: true,\n      cancelable: true,\n      view: window\n  });\n  element.dispatchEvent(event);\n  return element;\n}\n\n/**\n * Triggers input event on element\n * @param {Element} element\n */\nexport function input(element, value) {\n  if (isString(value)) {\n    // Trigger input event only when the value has changed\n    if (element.value !== value) {\n      element.value = value;\n      triggerInputEvent(element);\n    }\n\n    return element;\n  }\n\n  triggerInputEvent(element);\n  return element;\n}\n\nfunction triggerInputEvent(element) {\n  element.dispatchEvent(new Event('input'));\n  return element;\n}\n\n/**\n * @param {String} htmlString\n * @returns {Element}\n */\nexport function createElementFromHTML(htmlString) {\n  const tempDiv = document.createElement('div');\n  tempDiv.innerHTML = htmlString.trim();\n  return tempDiv.firstChild;\n}\n\nexport function createSelectListFromArray(arrayOfObjects, selectId) {\n  const selectElement = document.createElement('select');\n  selectElement.id = selectId; // Set the id for the select element\n\n  arrayOfObjects.forEach((obj) => {\n    const optionElement = document.createElement('option');\n    optionElement.value = obj.value;\n    optionElement.text = obj.text;\n    selectElement.appendChild(optionElement);\n  });\n\n  return selectElement;\n}\n\nexport function createDataListFromArray(arrayOfObjects, selectId) {\n  const selectElement = document.createElement('select');\n  selectElement.id = selectId; // Set the id for the select element\n\n  arrayOfObjects.forEach((obj) => {\n    const optionElement = document.createElement('option');\n    optionElement.value = obj.value;\n    optionElement.text = obj.text;\n    selectElement.appendChild(optionElement);\n  });\n\n  return selectElement;\n}\n\nexport function createDatalistFromArray(dataArray, datalistId) {\n  const datalist = document.createElement('datalist');\n  datalist.id = datalistId;\n\n  dataArray.forEach((optionText) => {\n    const option = document.createElement('option');\n    option.value = optionText;\n    datalist.appendChild(option);\n  });\n\n  return datalist;\n}\n\nexport function contentChangeWithPolling(element, callback, interval = 1000) {\n  let previousContent = element.textContent;\n\n  const poller = setInterval(() => {\n    const currentContent = element.textContent;\n    if (currentContent !== previousContent) {\n      callback(currentContent);\n      previousContent = currentContent;\n    }\n  }, interval);\n\n  // Optionally, you can return a function to stop the polling when needed\n  return function stopPolling() {\n    clearInterval(poller);\n  };\n}\n\nexport function selectElementWithContent(rootElement, querySelector, content) {\n  const elements = rootElement.querySelectorAll(querySelector);\n\n  for (const element of elements) {\n    if (element.textContent.includes(content)) {\n      return element;\n    }\n  }\n\n  return null;\n}\n\nexport function isElementDisplayNone(element) {\n  return window.getComputedStyle(element).display === 'none';\n}\n\nexport function isHtmlElement(element) {\n  return element instanceof HTMLElement;\n}\n\nexport function getCurrentUrl() {\n  return window.location.href;\n}\n","import { getDataAttribute } from \"../../modules/html.js\";\nimport { removeInvisibleChars, trimCharactersFromString } from \"../../modules/utils.js\";\n\nexport function getMusicAlbumSchemaData() {\n  const jsonLdScript = document.querySelector('script[type=\"application/ld+json\"]');\n  return jsonLdScript ? JSON.parse(jsonLdScript.textContent) : null;\n}\n\nfunction extractDataFromMusicGridElement(element) {\n  let artist = element.querySelector('.artist-override')?.innerText;\n\n  if (!artist) {\n    artist = document.querySelector('#band-name-location .title').innerText;\n  }\n\n  artist = trimCharactersFromString(artist, \" \\-\\n\");\n  artist = removeInvisibleChars(artist);\n\n  const titleParts = element.querySelector('.title').innerText.split(\"\\n\");\n  const title = removeInvisibleChars(titleParts[0]);\n  const url = element.querySelector('a').getAttribute('href');\n\n  return {\n    artist: artist,\n    title: title,\n    url: (url[0] === '/' ? window.location.origin : '') + url,\n    item_id: getDataAttribute(element, 'item-id'),\n  }\n}\n\nexport function getReleasesData() {\n  const releases = [];\n  const releaseElements = document.querySelectorAll('#music-grid .music-grid-item');\n\n  releaseElements.forEach(element => {\n    const releaseData = extractDataFromMusicGridElement(element);\n    releases.push(releaseData);\n  });\n\n  return releases;\n}\n\nexport function getBandPhotoSrc() {\n  const imgBandPhoto = document.querySelector('.band-photo');\n  return imgBandPhoto.src;\n}\n\nexport function isValidBandcampURL(url) {\n  const pattern = /^(https?:\\/\\/)?([a-z0-9-]+\\.)*bandcamp\\.com(\\/[a-z0-9-]+)*(\\/[a-z0-9-]+\\/[a-z0-9-]+)?$/;\n  return pattern.test(url);\n}\n","import { Release } from \"../app/release.js\";\nimport { isValidBandcampURL } from \"../bandcamp/modules/html.js\";\nimport { generateKeyForRelease, generateKeyForUrl, generateKeyUrlMapFromUrls, generateKeysFromUrls } from \"./key-generator.js\";\nimport { isArray, isFunction, isObject } from \"./utils.js\";\n\nconst storage = chrome.storage.local;\n\nexport function logStorage() {\n  console.log('B2D: Storage data');\n  storage.get(null, (data) => console.log(data));\n}\n\nexport function findAllReleases(onFind) {\n  storage.get(null, (data) => {\n    const releases = [];\n\n    for (const key in data) {\n      if (!data.hasOwnProperty(key) && !isObject(data[key])) {\n        continue;\n      }\n\n      try {\n        releases.push(Release.fromStorageObject(data[key]));\n      } catch (error) {\n        continue;\n      }\n    }\n\n    if (isFunction(onFind)) onFind(releases);\n  });\n}\n\nexport function findReleaseByUrl(url, onFind, onMissing) {\n  const key = generateKeyForUrl(url);\n  storage.get([key], (result) => {\n    if (isObject(result[key])) {\n      try {\n        const release = Release.fromStorageObject(result[key]);\n        if (isFunction(onFind)) onFind(release);\n      } catch (error) {\n        console.log(\"B2D: Broken storage data for release\", result[key]);\n        clearStorageByKey(key);\n      }\n    } else {\n      console.log(\"B2D: Release data doesn't exists\", key);\n      if (isFunction(onMissing)) onMissing(key);\n    }\n  });\n\n}\n\nexport function findReleasesByUrls(urls, onFind) {\n  const keys = generateKeysFromUrls(urls);\n  storage.get(keys, result => {\n    let releases = Object\n      .values(result)\n      .map(function(obj) {\n        try {\n          return Release.fromStorageObject(obj);\n        } catch (error) {\n          console.log(\"B2D: Broken storage object. \" + JSON.stringify(error), obj);\n          return null;\n        }\n      })\n      .filter(obj => obj instanceof Release);\n    if (isFunction(onFind)) onFind(releases);\n  });\n}\n\nexport function findMissingUrls(urls, onFind) {\n  const keyUrlMap = generateKeyUrlMapFromUrls(urls);\n  const keys = Object.keys(keyUrlMap);\n  storage.get(keys, result => {\n    const foundKeys = Object.keys(result);\n    const missingKeys = keys.filter(key => !foundKeys.includes(key));\n    const missingUrls = missingKeys.map(key => keyUrlMap[key]);\n    if (isFunction(onFind)) onFind(missingUrls);\n  });\n}\n\n/**\n * @param {Release} release\n */\nexport function saveRelease(release) {\n  const key = generateKeyForRelease(release);\n  storage.set({ [key]: release.toStorageObject() }, () => {\n    console.log(\"B2D: Release data was saved in the local storage\");\n  });\n}\n\n/**\n * @param {String} key\n * @param {Array} categoryValues\n */\nexport function addReleaseHistory(key, categoryValues) {\n  storage.get([key], (data) => {\n    let releaseData = data[key] || null;\n    if (releaseData === null) return;\n    let history = releaseData.history || {};\n\n    const date = new Date();\n    const dateStr = date.toISOString();\n\n    for (let category in categoryValues) {\n      if (!categoryValues.hasOwnProperty(category)) continue;\n\n      let historyCategory = history[category] || [];\n      if (!isArray(historyCategory)) continue;\n\n      const historyValue = {\n        date: dateStr,\n        value: categoryValues[category]\n      };\n\n      addUniqueValueObjectToArray(historyCategory, historyValue);\n      history[category] = historyCategory;\n    }\n\n    releaseData.history = history;\n\n    storage.set({ [key]: releaseData }, () => {\n      console.log(\"B2D: Release history for categories was saved successfully\", categoryValues);\n    });\n  });\n}\n\nfunction addUniqueValueObjectToArray(arr, obj) {\n  if (arr.length === 0 || arr[arr.length - 1].value !== obj.value) {\n      arr.push(obj);\n  }\n}\n\nexport function clearStorage() {\n  storage.clear();\n}\n\nexport function clearStorageByKey(key, onDone) {\n  isArray(key)\n    ? key.forEach(k => clearStorageByKey(k, onDone))\n    : storage.remove(key, () => {\n      if (chrome.runtime.lastError) {\n        console.error(`Error clearing local storage item with key \"${key}\": ${chrome.runtime.lastError}`);\n      }\n\n      if (isFunction(onDone)) onDone();\n    });\n}\n\nexport function getStorageSize(callable) {\n  storage.getBytesInUse(null, callable);\n}\n","import { Release, Track, TrackDuration } from \"../../app/release.js\";\nimport TrackTime from \"../../app/trackTime.js\";\nimport { getCurrentUrl } from \"../../modules/html.js\";\nimport { findReleaseByUrl, saveRelease } from \"../../modules/storage.js\";\nimport { getMusicAlbumSchemaData } from \"../modules/html.js\";\n\n// Setup logic for BC albums page\nexport function setupPageAlbum() {\n  const schema = getMusicAlbumSchemaData();\n  const release = createReleaseFromSchema(schema);\n  setupRelease(release);\n  setupSendMessageToPopup(release);\n}\n\n/**\n * @param {Object} schema\n * @returns {Release}\n */\nfunction createReleaseFromSchema(schema) {\n  const artist = schema.byArtist.name;\n  const title = schema.name;\n  const label = schema.publisher.name;\n  const datePublished = new Date(schema.datePublished);\n  const dateModified = new Date(schema.dateModified);\n  const tracks = schema.track.itemListElement.map(track => new Track(\n    track.position,\n    track.item.name,\n    TrackTime.fromDuration(track.item.duration)\n  ));\n  const url = schema.mainEntityOfPage;\n  const image = schema.image;\n  const keywords = schema.keywords;\n\n  return new Release(\n    artist,\n    title,\n    label,\n    datePublished,\n    dateModified,\n    tracks,\n    url,\n    image,\n    keywords\n  );\n}\n\n/**\n * @param {Release} release\n */\nfunction setupRelease(release) {\n  // Save release data to the storage if it doesn't exist\n  findReleaseByUrl(getCurrentUrl(), null, (key) => {\n    saveRelease(release);\n  });\n}\n\n/**\n * @param {Release} release\n */\nfunction setupSendMessageToPopup(release) {\n  chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n    if (request.type === 'getBandcampData') {\n      sendResponse({\n        type: 'release',\n        data: release.toStorageObject()\n      });\n    }\n\n    return true;\n  });\n}\n","import { injectCSSFile } from \"../../modules/utils.js\";\nimport { PageTypeDetector } from \"../app/page-type.js\";\nimport { setupPageAlbum } from \"../pages/page-album.js\";\nimport { setupPageMusic } from \"../pages/page-music.js\";\n\nexport function main () {\n  const pageType = (new PageTypeDetector()).detect();\n\n  if (pageType.isMusic()) {\n    setupPageMusic();\n  } else if (pageType.isAlbum()) {\n    setupPageAlbum();\n  }\n\n  injectCSSFile(chrome.runtime.getURL('src/bandcamp/styles.css'));\n}\n\nmain();\n","import { contentChangeWithPolling, createDatalistFromArray, createElementFromHTML, input, selectElementWithContent, setDataAttribute } from \"../../modules/html.js\";\nimport { containsOneOf, splitString, isEmptyArray, countOccurrences, removeBrackets } from \"../../modules/utils.js\";\nimport { getBandPhotoSrc, getReleasesData } from \"../modules/html.js\";\n\n// Setup logic for BC music page\nexport function setupPageMusic() {\n  setupSendMessageToPopup();\n  setupIsotope();\n}\n\nfunction setupSendMessageToPopup() {\n  // Cache main data\n  window.B2D = window.B2D || {};\n  window.B2D.pageReleases = getReleasesData();\n\n  chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n    if (request.type === 'getBandcampData') {\n      sendResponse({\n        type: 'list',\n        data: window.B2D.pageReleases,\n        popup: {\n          imageSrc: getBandPhotoSrc(),\n          search: getArtistFilterValue(),\n        }\n      });\n    }\n\n    return true;\n  });\n}\n\nfunction getArtistFilterValue() {\n  const artistFilter = document.querySelector('#b2dArtistFilter');\n  return artistFilter.value;\n}\n\nfunction setupIsotope() {\n  let grid = document.querySelector('#music-grid');\n  let iso = new Isotope(grid, {\n    itemSelector: '.music-grid-item',\n    layoutMode: 'fitRows'\n  });\n\n  const releases = getReleases();\n\n  releases.forEach(release => {\n    const gridElement = grid.querySelector('[data-item-id=\"' + release.item_id + '\"]');\n    setDataAttribute(gridElement, 'filter-artist', (release.artist + ' - ' + release.title).toLowerCase());\n  });\n\n  const artistFilterWidget = createArtistFilterWidget(releases);\n  const filterBlock = createElementFromHTML(`<div class=\"b2d-widget-container\"></div>`);\n  const albumAmountWidget = createAlbumAmountWidget(releases);\n\n  filterBlock.append(artistFilterWidget);\n  filterBlock.append(albumAmountWidget);\n\n  // Prepend to the releases bandcamp page\n  document.querySelector('.leftMiddleColumns').prepend(filterBlock);\n\n  setupArtistFilterElement(artistFilterWidget, iso, albumAmountWidget);\n\n  console.log('B2D: Isotope setuped correctly');\n}\n\nfunction getReleases() {\n  // Cache main data\n  const B2D = window.B2D || {};\n\n  if (!isEmptyArray(B2D.pageReleases)) {\n    return B2D.pageReleases;\n  }\n\n  B2D.pageReleases = getReleasesData();\n\n  return B2D.pageReleases;\n}\n\nfunction setupArtistFilterElement(artistFilterElement, iso, albumAmountWidget) {\n  const artistFilter = artistFilterElement.querySelector('#b2dArtistFilter');\n\n  artistFilter.addEventListener('input', () => {\n    let selectedValue = removeBrackets(artistFilter.value);\n    artistFilter.value = selectedValue;\n\n    selectedValue = selectedValue.toLowerCase();\n    const filter = selectedValue ? `[data-filter-artist*=\"${selectedValue}\"]` : '*';\n    iso.arrange({ filter: filter });\n\n    albumAmountWidget.querySelector('.b2d-visible').innerHTML = iso.getFilteredItemElements().length;\n\n    // try to updata images\n    window.scrollBy(0, 1);\n    window.scrollBy(0, -1);\n  });\n\n\n  chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n    if (message.type === 'releases-list-search') {\n      input(artistFilter, message.search);\n    }\n  });\n\n  // Check if Bandcamp filter exists\n  const bandSelectorContainer = document.querySelector('.leftMiddleColumns .label-band-selector-container');\n\n  if (bandSelectorContainer) {\n    let bandMenuTitle = selectElementWithContent(bandSelectorContainer, '.bands-menu-title span', 'artists');\n\n    if (!bandMenuTitle) {\n      bandMenuTitle = bandSelectorContainer.querySelector('.bands-menu-title span.name');\n    }\n\n    if (bandMenuTitle) {\n      contentChangeWithPolling(bandMenuTitle, (newContent) => {\n        if (newContent === 'artists') {\n          newContent = '';\n        }\n\n        input(artistFilter, newContent);\n      }, 500);\n    }\n  }\n}\n\nfunction getArtistListData(releases) {\n  let filterData = [];\n  let artistsData = [];\n  let releasesData = [];\n\n  // add artists\n  releases.forEach((release) => {\n    if (containsOneOf(release.artist, ['V/A'])) {\n      artistsData.push(release.artist);\n    } else {\n      const artists = splitString(release.artist, /[,/+•|]| Vs | & +/);\n      artistsData.push(...artists);\n    }\n  });\n  artistsData.sort();\n  filterData.push(...countOccurrences(artistsData));\n\n  // add artists with release titles\n  releases.forEach((release) => releasesData.push(release.artist + ' - ' + release.title));\n  releasesData.sort();\n  filterData.push(...releasesData);\n\n  return [...new Set(filterData)];\n}\n\nfunction createArtistFilterWidget(releases) {\n  let artistFilterElement = createElementFromHTML(\n`<div class=\"b2d-widget\">\n  <label for=\"b2dArtistFilter\">Artist / Album:</label>\n  <input list=\"artist-filter-data\" id=\"b2dArtistFilter\" name=\"artist-filter\" />\n</div>`);\n  const artistFilterData = getArtistListData(releases);\n  const artistFilterDatalist = createDatalistFromArray(artistFilterData, 'artist-filter-data');\n\n  artistFilterElement.append(artistFilterDatalist);\n\n  return artistFilterElement;\n}\n\nfunction createAlbumAmountWidget(releases) {\n  return createElementFromHTML(\n`<div class=\"b2d-albumAmount b2d-widget\" title=\"The amount of releases on the page\">\nReleases: <span class=\"b2d-visible\">${releases.length}</span> / <span class=\"b2d-total\">${releases.length}</span>\n</div>`);\n}\n"],"names":["value","Array","isArray","removeInvisibleChars","inputString","replace","PageTypeEnum","PageType","constructor","this","isAlbum","isArtists","isCommunity","isMerch","isMusic","isTrack","isVideo","isUnknow","PageTypeDetector","url","window","location","href","detect","self","includes","document","querySelector","byteToHex","i","push","toString","slice","uuid","test","TypeError","v","arr","Uint8Array","parseInt","f","s","x","y","z","ROTL","n","name","version","hashfunc","generateUUID","namespace","buf","offset","_namespace","str","unescape","encodeURIComponent","bytes","length","charCodeAt","stringToBytes","set","K","H","msg","prototype","call","l","N","Math","ceil","M","Uint32Array","j","pow","floor","W","t","a","b","c","d","e","T","unsafeStringify","err","DNS","URL","v35","generateKeyForUrl","TrackTime","hours","minutes","seconds","date","toDate","Intl","DateTimeFormat","hour12","hour","minute","second","format","Date","setHours","setMinutes","setSeconds","fromString","timeString","Error","split","fromDuration","duration","exec","ReleaseItem","artist","title","fromObject","obj","releaseItem","label","published","modified","tracks","tracksQty","image","keywords","datePublished","dateModified","toStorageObject","toISOString","map","track","fromStorageObject","trackData","Track","toMetadata","chrome","runtime","getManifest","qty","fileType","description","submissionNotes","template","replacements","key","hasOwnProperty","extension_url","release_url","num","time","getDataAttribute","element","attributeName","defaultValue","undefined","hasAttribute","hasDataAttribute","getAttribute","input","triggerInputEvent","dispatchEvent","Event","createElementFromHTML","htmlString","tempDiv","createElement","innerHTML","trim","firstChild","getReleasesData","releases","querySelectorAll","forEach","releaseData","innerText","charactersToTrim","escapedCharacters","regexPattern","RegExp","trimCharactersFromString","origin","item_id","extractDataFromMusicGridElement","storage","local","findReleaseByUrl","onFind","onMissing","get","result","Object","release","error","console","log","clearStorageByKey","onDone","k","remove","lastError","setupPageAlbum","schema","byArtist","publisher","itemListElement","position","item","mainEntityOfPage","createReleaseFromSchema","jsonLdScript","JSON","parse","textContent","getMusicAlbumSchemaData","generateKeyForRelease","saveRelease","setupRelease","onMessage","addListener","request","sender","sendResponse","type","data","setupSendMessageToPopup","pageType","B2D","pageReleases","popup","imageSrc","src","search","grid","iso","Isotope","itemSelector","layoutMode","getReleases","attributeValue","setAttribute","setDataAttribute","toLowerCase","artistFilterWidget","artistFilterElement","artistFilterData","filterData","artistsData","releasesData","string1","arrayOfStrings","string2","containsOneOf","artists","delimiters","filter","sort","count","Map","items","has","countOccurrences","Set","getArtistListData","artistFilterDatalist","dataArray","datalistId","datalist","id","optionText","option","appendChild","createDatalistFromArray","append","createArtistFilterWidget","filterBlock","albumAmountWidget","createAlbumAmountWidget","prepend","artistFilter","addEventListener","selectedValue","arrange","getFilteredItemElements","scrollBy","message","bandSelectorContainer","bandMenuTitle","rootElement","content","elements","selectElementWithContent","callback","interval","previousContent","setInterval","currentContent","contentChangeWithPolling","newContent","setupArtistFilterElement","setupIsotope","cssUrl","linkElement","rel","head","injectCSSFile","getURL","main"],"sourceRoot":""}