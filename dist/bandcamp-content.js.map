{"version":3,"file":"bandcamp-content.js","mappings":"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","sources":["webpack:///./src/modules/utils.js","webpack:///./src/modules/html.js","webpack:///./src/bandcamp/app/page-type.js","webpack:///./node_modules/uuid/dist/esm-browser/stringify.js","webpack:///./node_modules/uuid/dist/esm-browser/regex.js","webpack:///./node_modules/uuid/dist/esm-browser/parse.js","webpack:///./node_modules/uuid/dist/esm-browser/validate.js","webpack:///./node_modules/uuid/dist/esm-browser/sha1.js","webpack:///./node_modules/uuid/dist/esm-browser/v5.js","webpack:///./node_modules/uuid/dist/esm-browser/v35.js","webpack:///./src/modules/key-generator.js","webpack:///./src/app/trackTime.js","webpack:///./src/app/release.js","webpack:///./src/bandcamp/modules/html.js","webpack:///./src/modules/storage.js","webpack:///./src/bandcamp/pages/page-album.js","webpack:///./src/bandcamp/pages/page-music.js","webpack:///./src/bandcamp/modules/main.js"],"sourcesContent":["/**\n * @param {String} string\n * @param {String} pad\n * @param {Number} length\n * @returns {String}\n */\nexport function padStringLeft(string, pad, length) {\n  const padding = string.length >= length ? '' : pad.repeat(length - string.length);\n  return padding + string;\n}\n\n/** @see https://stackoverflow.com/a/8485137/3227570 */\nexport function safeFilename(value) {\n  return transliterate(value).replace(/[^a-zA-Z0-9]/gi, '_').toLowerCase();\n}\n\n/** @see https://stackoverflow.com/a/11404121 */\nconst transliterationMap = {\n  \"Ё\": \"YO\", \"Й\": \"I\", \"Ц\": \"TS\", \"У\": \"U\", \"К\": \"K\", \"Е\": \"E\", \"Н\": \"N\", \"Г\": \"G\", \"Ш\": \"SH\", \"Щ\": \"SCH\", \"З\": \"Z\", \"Х\": \"H\", \"Ъ\": \"'\", \"ё\": \"yo\", \"й\": \"i\", \"ц\": \"ts\", \"у\": \"u\", \"к\": \"k\", \"е\": \"e\", \"н\": \"n\", \"г\": \"g\", \"ш\": \"sh\", \"щ\": \"sch\", \"з\": \"z\", \"х\": \"h\", \"ъ\": \"'\", \"Ф\": \"F\", \"Ы\": \"I\", \"В\": \"V\", \"А\": \"A\", \"П\": \"P\", \"Р\": \"R\", \"О\": \"O\", \"Л\": \"L\", \"Д\": \"D\", \"Ж\": \"ZH\", \"Э\": \"E\", \"ф\": \"f\", \"ы\": \"i\", \"в\": \"v\", \"а\": \"a\", \"п\": \"p\", \"р\": \"r\", \"о\": \"o\", \"л\": \"l\", \"д\": \"d\", \"ж\": \"zh\", \"э\": \"e\", \"Я\": \"Ya\", \"Ч\": \"CH\", \"С\": \"S\", \"М\": \"M\", \"И\": \"I\", \"Т\": \"T\", \"Ь\": \"'\", \"Б\": \"B\", \"Ю\": \"YU\", \"я\": \"ya\", \"ч\": \"ch\", \"с\": \"s\", \"м\": \"m\", \"и\": \"i\", \"т\": \"t\", \"ь\": \"'\", \"б\": \"b\", \"ю\": \"yu\"\n};\n\nfunction transliterate(word) {\n  return Array.from(word).map(char => transliterationMap[char] || char).join(\"\");\n}\n\n/** @see https://flexiple.com/javascript/javascript-capitalize-first-letter/ */\nexport function capitalizeEachWord(str) {\n  const words = str.split(\" \");\n\n  const capitalizedWords = words.map(word => {\n    const firstLetter = word.charAt(0).toUpperCase();\n    const restOfWord = word.slice(1);\n    return `${firstLetter}${restOfWord}`;\n  });\n\n  return capitalizedWords.join(\" \");\n}\n\nexport function convertToAlias(str) {\n  const slug = str.toLowerCase().replace(/[^a-z0-9]+/g, '-');\n  const trimmedSlug = slug.replace(/^-+|-+$/g, '');\n  return trimmedSlug;\n}\n\nexport function isEmptyObject(obj) {\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function isString(value) {\n  return typeof value === 'string';\n}\n\nexport function isObject(value) {\n  return Object.prototype.toString.call(value) === '[object Object]';\n}\n\nexport function isArray(value) {\n  return Array.isArray(value);\n}\n\nexport function isFunction(value) {\n  return typeof value === 'function';\n}\n\n/**\n * @param {Array} value\n * @returns {Boolean}\n */\nexport function isEmptyArray(value) {\n  return !isArray(value) || value.length === 0;\n}\n\n/**\n * @param {Array<Array<String>>}\n * @return {Array<String>}\n */\nexport function arrayToFlat(arr) {\n  return [].concat(...arr);\n}\n\n/**\n * @param {Array<Array<String>|String>}\n * @return {Array<String>}\n */\nexport function arrayUnique(arr) {\n  return [...new Set(arrayToFlat(arr))];\n}\n\n/**\n * @param {Element} element\n * @param {String} className\n * @returns {Boolean}\n */\nexport function hasClass(element, className) {\n  return element.classList.contains(className);\n}\n\n/**\n * @param {String} url\n * @param {Element} targetElement\n * @returns {Promise}\n */\nexport function loadHTMLContent(url, targetElement) {\n  return fetch(url)\n      .then(response => response.text())\n      .then(htmlContent => {\n          targetElement.innerHTML = htmlContent;\n          return targetElement;\n      })\n      .catch(error => console.error('Error loading HTML content:', error));\n}\n\n/**\n * Replace tokens in a template string with their corresponding values.\n * @param {string} template - The template string with tokens to be replaced.\n * @param {object} replacements - An object containing key-value pairs for replacements.\n * @returns {string} - The template string with tokens replaced by their values.\n */\nexport function replaceTokens(template, replacements) {\n  for (const key in replacements) {\n    if (replacements.hasOwnProperty(key)) {\n      template = template.replace(`{${key}}`, replacements[key]);\n    }\n  }\n  return template;\n}\n\n/**\n * @param {String} inputString\n * @param {RegExp|String} delimiters\n * @returns {Array}\n */\nexport function splitString(inputString, delimiters) {\n  const resultArray = inputString.split(delimiters);\n  return resultArray\n    .map(item => item.trim())\n    .filter(item => item !== '');\n}\n\nexport function containsOneOf(string1, arrayOfStrings) {\n  // This function checks if a string contains one of the strings in an array of strings.\n\n  // Args:\n  //   string1: The string to check.\n  //   arrayOfStrings: The array of strings to look for.\n\n  // Returns:\n  //   True if string1 contains one of the strings in arrayOfStrings, False otherwise.\n\n  for (const string2 of arrayOfStrings) {\n    if (string1.includes(string2)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function countOccurrences(arr) {\n  const count = new Map();\n  const items = new Map();\n  const result = [];\n\n  // Count occurrences of each element in the array\n  for (const item of arr) {\n      const key = item.toLowerCase();\n\n      if (!items.has(key)) {\n        items.set(key, item);\n      }\n\n      count.set(key, (count.get(key) || 0) + 1);\n  }\n\n  for (const [key, item] of items) {\n    const value = count.get(key);\n    if (value > 1) {\n      result.push(`${item} (${value})`);\n    } else {\n      result.push(item);\n    }\n  }\n\n  return result;\n}\n\nexport function removeBrackets(inputString) {\n  // Use a regular expression to remove the brackets and their contents\n  return inputString.replace(/\\s*\\([^)]*\\)/, '');\n}\n\nexport function trimCharactersFromString(inputString, charactersToTrim) {\n  // Escape special characters within the provided string and construct the regex pattern\n  const escapedCharacters = charactersToTrim.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n  const regexPattern = new RegExp(`^[${escapedCharacters}]+|[${escapedCharacters}]+$`, 'g');\n  const trimmedString = inputString.replace(regexPattern, '');\n\n  return trimmedString;\n}\n\nexport function removeInvisibleChars(inputString) {\n  // Define the invisible character(s) you want to remove (for example, non-breaking space)\n  const invisibleCharsRegex = /[\\u200B-\\u200D\\uFEFF\\u200E\\u200F\\u202A-\\u202E]|&lrm;/g;\n  // Use the regular expression to remove invisible characters\n  const cleanedString = inputString.replace(invisibleCharsRegex, '');\n\n  return cleanedString;\n}\n\nexport function bytesToSize(bytes) {\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n\n  if (bytes === 0) return '0 Byte';\n\n  const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n  return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];\n}\n\nexport function removeLeadingZeroOrColon(str) {\n  // Use a regular expression to match leading zeros or colons\n  // and replace them with an empty string\n  return str.replace(/^(:|0)*/, '');\n}\n\nexport const camelCaseToReadable = (str) => {\n  // Replace each uppercase letter with a space and that letter in lowercase\n  let result = str.replace(/([a-z])([A-Z])/g, '$1 $2');\n  // Capitalize the first letter of the resulting string\n  result = result.charAt(0).toUpperCase() + result.slice(1);\n  return result;\n}\n\nexport const convertNewlinesToBreaks = (str) => {\n  return str.replace(/\\n/g, '<br>');\n}\n","import { isArray, isFunction, isObject, isString } from \"./utils.js\";\n\nexport function hasDataAttribute(element, attributeName) {\n  return element.hasAttribute(`data-${attributeName}`);\n}\n\nexport function setDataAttribute(element, attributeName, attributeValue = '') {\n  if (isObject(attributeName)) {\n    const obj = attributeName;\n    for (const key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        setDataAttribute(element, key, obj[key]);\n      }\n    }\n    return;\n  }\n  element.setAttribute(`data-${attributeName}`, attributeValue);\n}\n\nexport function getDataAttribute(element, attributeName, defaultValue = undefined) {\n  return hasDataAttribute(element, attributeName) ? element.getAttribute(`data-${attributeName}`) : defaultValue;\n}\n\nexport function show(...element) {\n  element.forEach(el => isArray(el) ? show(...el) : el.classList.remove('visually-hidden'));\n}\n\nexport function hide(...element) {\n  element.forEach(el => isArray(el) ? hide(...el) : el.classList.add('visually-hidden'));\n}\n\nexport function disable(...element) {\n  element.forEach(el => isArray(el) ? disable(...el) : (el.disabled = true));\n}\n\nexport function enable(...element) {\n  element.forEach(el => isArray(el) ? enable(...el) : (el.disabled = false));\n}\n\n/**\n * Triggers click event on the element\n * @param {Element} element\n */\nexport function click(element) {\n  var event = new MouseEvent(\"click\", {\n      bubbles: true,\n      cancelable: true,\n      view: window\n  });\n  element.dispatchEvent(event);\n  return element;\n}\n\n/**\n * Triggers input event on element\n * @param {Element} element\n */\nexport function input(element, value) {\n  if (isString(value)) {\n    // Trigger input event only when the value has changed\n    if (element.value !== value) {\n      element.value = value;\n      triggerInputEvent(element);\n    }\n\n    return element;\n  }\n\n  triggerInputEvent(element);\n  return element;\n}\n\nfunction triggerInputEvent(element) {\n  element.dispatchEvent(new Event('input'));\n  return element;\n}\n\n/**\n * @param {String} htmlString\n * @returns {Element}\n */\nexport function createElementFromHTML(htmlString) {\n  const tempDiv = document.createElement('div');\n  tempDiv.innerHTML = htmlString.trim();\n  return tempDiv.firstChild;\n}\n\nexport function createSelectListFromArray(arrayOfObjects, selectId) {\n  const selectElement = document.createElement('select');\n  selectElement.id = selectId; // Set the id for the select element\n\n  arrayOfObjects.forEach((obj) => {\n    const optionElement = document.createElement('option');\n    optionElement.value = obj.value;\n    optionElement.text = obj.text;\n    selectElement.appendChild(optionElement);\n  });\n\n  return selectElement;\n}\n\nexport function createDataListFromArray(arrayOfObjects, selectId) {\n  const selectElement = document.createElement('select');\n  selectElement.id = selectId; // Set the id for the select element\n\n  arrayOfObjects.forEach((obj) => {\n    const optionElement = document.createElement('option');\n    optionElement.value = obj.value;\n    optionElement.text = obj.text;\n    selectElement.appendChild(optionElement);\n  });\n\n  return selectElement;\n}\n\nexport function createDatalistFromArray(dataArray, datalistId) {\n  const datalist = document.createElement('datalist');\n  datalist.id = datalistId;\n\n  dataArray.forEach((optionText) => {\n    const option = document.createElement('option');\n    option.value = optionText;\n    datalist.appendChild(option);\n  });\n\n  return datalist;\n}\n\nexport function contentChangeWithPolling(element, callback, interval = 1000) {\n  let previousContent = element.textContent;\n\n  const poller = setInterval(() => {\n    const currentContent = element.textContent;\n    if (currentContent !== previousContent) {\n      callback(currentContent);\n      previousContent = currentContent;\n    }\n  }, interval);\n\n  // Optionally, you can return a function to stop the polling when needed\n  return function stopPolling() {\n    clearInterval(poller);\n  };\n}\n\nexport function selectElementWithContent(rootElement, querySelector, content) {\n  const elements = rootElement.querySelectorAll(querySelector);\n\n  for (const element of elements) {\n    if (element.textContent.includes(content)) {\n      return element;\n    }\n  }\n\n  return null;\n}\n\nexport function isElementDisplayNone(element) {\n  return window.getComputedStyle(element).display === 'none';\n}\n\nexport function isHtmlElement(element) {\n  return element instanceof HTMLElement;\n}\n\nexport function getCurrentUrl() {\n  return window.location.href;\n}\n\n/**\n * Observes changes to a specified attribute on a given HTMLElement\n * and runs a callback function when changes are detected.\n *\n * @param {HTMLElement} element - The element to observe.\n * @param {string} attributeName - The name of the attribute to observe.\n * @param {Function} callback - The function to call when the attribute changes.\n */\nexport function observeAttributeChange(element, attributeName, callback) {\n  const observer = new MutationObserver((mutationsList) => {\n      for (const mutation of mutationsList) {\n          if (mutation.type === 'attributes' && mutation.attributeName === attributeName) {\n              callback(element);\n          }\n      }\n  });\n\n  const config = { attributes: true, attributeFilter: [attributeName] };\n  observer.observe(element, config);\n}\n\n/**\n * @param {String} cssUrl\n */\nexport function injectCSSFile(cssUrl) {\n  const linkElement = document.createElement('link');\n  linkElement.rel = 'stylesheet';\n  linkElement.href = cssUrl;\n  linkElement.onload = () => {\n    console.log('[B2D] Injected css file:', cssUrl);\n  };\n\n  document.head.appendChild(linkElement);\n}\n\nexport function injectJSFile(url, callback) {\n  const s = document.createElement('script');\n  s.src = url;\n  s.onload = callback;\n  (document.head||document.documentElement).appendChild(s);\n}\n\nexport const createIconLink = ({\n  className = 'icon-link',\n  href = '#',\n  onClick,\n  title = '',\n  iconDefault,\n  iconOnClick,\n  iconOnClickTimeout = 3000,\n}) => {\n  const link = document.createElement(\"a\");\n  link.classList.add(className);\n  link.title = title;\n  link.href = href;\n  link.target = '_blank';\n  link.innerHTML = `<b2d-icon name=\"${iconDefault}\"></b2d-icon>`;\n\n  if (isFunction(onClick)) {\n    link.addEventListener('click', (e) => {\n      e.preventDefault();\n      const eventReturn = onClick(e);\n\n      if (iconOnClick) {\n        const icon = link.querySelector('b2d-icon');\n        icon.setIcon(iconOnClick);\n        setTimeout(() => {\n          icon.setIcon(iconDefault);\n        }, iconOnClickTimeout);\n      }\n\n      return eventReturn;\n    });\n  }\n\n  return link;\n}\n","const PageTypeEnum = {\n  ALBUM: 'album',\n  ARTISTS: 'artists',\n  COMMUNITY: 'community',\n  MERCH: 'merch',\n  MUSIC: 'music',\n  TRACK: 'track',\n  VIDEO: 'video',\n  UNKNOWN: 'unknown'\n};\n\nexport class PageType {\n  constructor(value) {\n    this.value = value;\n  }\n\n  isAlbum = () => this.value === PageTypeEnum.ALBUM;\n  isArtists = () => this.value === PageTypeEnum.ARTISTS;\n  isCommunity = () => this.value === PageTypeEnum.COMMUNITY;\n  isMerch = () => this.value === PageTypeEnum.MERCH;\n  isMusic = () => this.value === PageTypeEnum.MUSIC;\n  isTrack = () => this.value === PageTypeEnum.TRACK;\n  isVideo = () => this.value === PageTypeEnum.VIDEO;\n  isUnknow = () => this.value === PageTypeEnum.UNKNOWN;\n}\n\nexport class PageTypeDetector {\n  constructor() {\n    this.url = window.location.href;\n  }\n\n  detect = () => {\n    const self = this;\n    let value = PageTypeEnum.UNKNOWN;\n\n    if (self.isAlbum()) {\n      value = PageTypeEnum.ALBUM;\n    } else if (self.isArtists()) {\n      value = PageTypeEnum.ARTISTS;\n    } else if (self.isCommunity()) {\n      value = PageTypeEnum.COMMUNITY;\n    } else if (self.isMusic()) {\n      value = PageTypeEnum.MUSIC;\n    } else if (self.isMerch()) {\n      value = PageTypeEnum.MERCH;\n    } else if (self.isTrack()) {\n      value = PageTypeEnum.TRACK;\n    } else if (self.isVideo()) {\n      value = PageTypeEnum.VIDEO;\n    }\n\n    return new PageType(value);\n  }\n\n  isAlbum = () => this.url.includes('/album/');\n  isArtists = () => this.url.includes('/artists/') || !!document.querySelector('.artists-grid');\n  isCommunity = () => this.url.includes('/community/');\n  isMerch = () => this.url.includes('/merch/');\n  isMusic = () => this.url.includes('/music/') || !!document.querySelector('#music-grid');\n  isTrack = () => this.url.includes('/track/');\n  isVideo = () => this.url.includes('/video/');\n}\n","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  let v;\n  const arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  const K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  const H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    const msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (let i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  const l = bytes.length / 4 + 2;\n  const N = Math.ceil(l / 16);\n  const M = new Array(N);\n\n  for (let i = 0; i < N; ++i) {\n    const arr = new Uint32Array(16);\n\n    for (let j = 0; j < 16; ++j) {\n      arr[j] = bytes[i * 64 + j * 4] << 24 | bytes[i * 64 + j * 4 + 1] << 16 | bytes[i * 64 + j * 4 + 2] << 8 | bytes[i * 64 + j * 4 + 3];\n    }\n\n    M[i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (let i = 0; i < N; ++i) {\n    const W = new Uint32Array(80);\n\n    for (let t = 0; t < 16; ++t) {\n      W[t] = M[i][t];\n    }\n\n    for (let t = 16; t < 80; ++t) {\n      W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);\n    }\n\n    let a = H[0];\n    let b = H[1];\n    let c = H[2];\n    let d = H[3];\n    let e = H[4];\n\n    for (let t = 0; t < 80; ++t) {\n      const s = Math.floor(t / 20);\n      const T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nconst v5 = v35('v5', 0x50, sha1);\nexport default v5;","import { unsafeStringify } from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function v35(name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    var _namespace;\n\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    let bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return unsafeStringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import { v5 as uuid5} from 'uuid';\nimport { Release } from '../app/release.js';\n\n/**\n * @param {String} url\n * @returns {String}\n */\nexport function generateKeyForUrl(url) {\n  const uuid = uuid5(url, uuid5.URL);\n  // console.log(`B2D: uuid5(${url}): `, uuid);\n  return uuid;\n}\n\n/**\n * @param {ReleaseItem} releaseItem\n * @return {String}\n */\nexport function generateKeyForReleaseItem(releaseItem) {\n  return generateKeyForUrl(releaseItem.url);\n}\n\n/**\n * @param {Release} release\n * @return {String}\n */\nexport function generateKeyForRelease(release) {\n  return generateKeyForReleaseItem(release.releaseItem);\n}\n\nexport function generateKeysFromUrls(urls) {\n  const keys = [];\n  urls.forEach(url => keys.push(generateKeyForUrl(url)));\n  return keys;\n}\n\nexport function generateKeyUrlMapFromUrls(urls) {\n  const keyUrlMap = {};\n\n  urls.forEach(url => {\n    const key = generateKeyForUrl(url);\n    keyUrlMap[key] = url;\n  });\n\n  return keyUrlMap;\n}\n","class TrackTime {\n  /**\n   * @type {Number}\n   */\n  #hours;\n\n  /**\n   * @type {Number}\n   */\n  #minutes;\n\n  /**\n   * @type {Number}\n   */\n  #seconds;\n\n  /**\n   * Constructs a Time object with hours, minutes, and seconds.\n   * @param {number} hours - The hours component of the time.\n   * @param {number} minutes - The minutes component of the time.\n   * @param {number} seconds - The seconds component of the time.\n   */\n  constructor(hours, minutes, seconds) {\n      this.#hours = hours;\n      this.#minutes = minutes;\n      this.#seconds = seconds;\n  }\n\n  get value() {\n    return this.toString();\n  }\n\n  get date() {\n    return this.toDate();\n  }\n\n  /**\n   * Returns a string representation of the duration in the format \"HH:MM:SS\".\n   * @returns {string} String representation of the duration.\n   */\n  toString() {\n    const formatter = new Intl.DateTimeFormat('en', {\n      hour12: false,\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n    });\n\n    return formatter.format(this.toDate());\n  }\n\n  toDate() {\n    const date = new Date(0);\n    date.setHours(this.#hours);\n    date.setMinutes(this.#minutes);\n    date.setSeconds(this.#seconds);\n\n    return date;\n  }\n\n  /**\n   * Parses a time string in the format HH:MM:SS and returns an object with hours, minutes, and seconds.\n   * Throws an error if the input string is not in the valid time format.\n   *\n   * @param {string} timeString - The time string to parse, expected in the format HH:MM:SS.\n   * @returns {TrackTime} A Time object containing the parsed hours, minutes, and seconds as numbers.\n   * @throws {Error} Throws an error if the input string is not in the valid time format HH:MM:SS.\n   */\n  static fromString(timeString) {\n    // Regular expression to match HH:MM:SS format\n    const timeFormat = /^([01]\\d|2[0-3]):([0-5]\\d):([0-5]\\d)$/;\n\n    if (!timeFormat.test(timeString)) {\n        throw new Error(\"Invalid time format. Please use HH:MM:SS.\");\n    }\n\n    const [hours, minutes, seconds] = timeString.split(':');\n\n    return new TrackTime(\n      parseInt(hours, 10),\n      parseInt(minutes, 10),\n      parseInt(seconds, 10)\n    );\n  }\n\n  /**\n   * Creates a Duration instance from a duration string.\n   * The duration string should be in the format \"XHYMZS\",\n   * where X is hours, Y is minutes, and Z is seconds.\n   * See: https://en.wikipedia.org/wiki/ISO_8601\n   * @param {string} duration\n   * @returns {TrackTime}\n   */\n  static fromDuration(duration) {\n    const regexHours = /(\\d+)H/;\n    const regexMinutes = /(\\d+)M/;\n    const regexSeconds = /(\\d+)S/;\n    const hours = (regexHours.exec(duration) || [])[1] || 0;\n    const minutes = (regexMinutes.exec(duration) || [])[1] || 0;\n    const seconds = (regexSeconds.exec(duration) || [])[1] || 0;\n\n    return new TrackTime(\n      parseInt(hours, 10),\n      parseInt(minutes, 10),\n      parseInt(seconds, 10)\n    );\n  }\n}\n\nexport default TrackTime;\n","import { generateKeyForUrl } from '../modules/key-generator.js';\nimport TrackTime from './trackTime.js';\n\nexport class ReleaseItem {\n  constructor(url, artist, title) {\n    this.url = url;\n    this.artist = artist;\n    this.title = title;\n    this.uuid = generateKeyForUrl(url);\n  }\n\n  static fromObject(obj) {\n    return new ReleaseItem(obj.url, obj.artist, obj.title);\n  }\n}\n\nexport class Release {\n  /**\n   * @type {ReleaseItem}\n   */\n  releaseItem;\n\n  /**\n   * @type {string}\n   */\n  label;\n\n  /**\n   * @type {Date}\n   */\n  published;\n\n  /**\n   * @type {Date}\n   */\n  modified;\n\n  /**\n   * @type {Array.<Track>}\n   */\n  tracks;\n\n  /**\n   * @type {Number}\n   */\n  tracksQty;\n\n  /**\n   * @type {string}\n   */\n  image;\n\n  /**\n   * @type {Array.<string>}\n   */\n  keywords;\n\n  /**\n   * @param {string} artist\n   * @param {string} title\n   * @param {string} label\n   * @param {Date} datePublished\n   * @param {Date} dateModified\n   * @param {Array.<Track>} tracks\n   * @param {string} url\n   * @param {string} image\n   * @param {Array.<string>} keywords\n   */\n  constructor(artist, title, label, datePublished, dateModified, tracks, url, image, keywords) {\n    this.releaseItem = new ReleaseItem(url, artist, title);\n    this.label = label;\n    this.published = datePublished;\n    this.modified = dateModified;\n    this.tracks = tracks;\n    this.tracksQty = tracks.length;\n    this.image = image;\n    this.keywords = keywords;\n  }\n\n  get artist() {\n    return this.releaseItem.artist;\n  }\n\n  get url() {\n    return this.releaseItem.url;\n  }\n\n  get title() {\n    return this.releaseItem.title;\n  }\n\n  toStorageObject() {\n    return {\n      uuid: this.releaseItem.uuid,\n      artist: this.releaseItem.artist,\n      title: this.releaseItem.title,\n      url: this.releaseItem.url,\n      label: this.label,\n      published: this.published.toISOString(),\n      modified: this.modified.toISOString(),\n      tracks: this.tracks.map(track => track.toStorageObject()),\n      image: this.image,\n      keywords: this.keywords\n    };\n  }\n\n  /**\n   * Create an instance of the Release class from the object.\n   * @param {Object} obj - A simple object.\n   * @returns {Release} An instance of the Release class.\n   */\n  static fromStorageObject(obj) {\n    if (!obj.url || !obj.tracks) {\n      throw new Error('Cannot create Release object from object', obj);\n    }\n\n    const tracks = obj.tracks.map(trackData => Track.fromStorageObject(trackData));\n\n    if (!obj.published && !obj.date) {\n      throw new Error(\"Missing published or date property\");\n    }\n\n    if (!obj.modified && !obj.date) {\n      throw new Error(\"Missing published or date property\");\n    }\n\n    return new Release(\n      obj.artist,\n      obj.title,\n      obj.label,\n      new Date(obj.published ?? obj.date),\n      new Date(obj.modified ?? obj.date),\n      tracks,\n      obj.url,\n      obj.image,\n      obj.keywords\n    );\n  }\n}\n\nexport class Track {\n  /**\n   * @type {String}\n   */\n  num;\n\n  /**\n   * @type {String}\n   */\n  title;\n\n  /**\n   * @type {TrackTime}\n   */\n  time;\n\n  /**\n   * @param {String} num\n   * @param {String} title\n   * @param {TrackTime} time\n   */\n  constructor(num, title, time) {\n    this.num = num;\n    this.title = title;\n    this.time = time;\n  }\n\n  toStorageObject() {\n    return {\n      num: this.num,\n      title: this.title,\n      time: this.time.value\n    };\n  }\n\n  /**\n   * Create an instance of the Track class from the object.\n   * @param {Object} obj - A simple object.\n   * @returns {Track} An instance of the Track class.\n   */\n  static fromStorageObject(obj) {\n    return new Track(\n      obj.num,\n      obj.title,\n      TrackTime.fromString(obj.time || obj.duration)\n    );\n  }\n}\n","import { getDataAttribute } from \"../../modules/html.js\";\nimport { removeInvisibleChars, trimCharactersFromString } from \"../../modules/utils.js\";\n\nexport function getMusicAlbumSchemaData() {\n  const jsonLdScript = document.querySelector('script[type=\"application/ld+json\"]');\n  return jsonLdScript ? JSON.parse(jsonLdScript.textContent) : null;\n}\n\nfunction extractDataFromMusicGridElement(element) {\n  let artist = element.querySelector('.artist-override')?.innerText;\n\n  if (!artist) {\n    artist = document.querySelector('#band-name-location .title').innerText;\n  }\n\n  artist = trimCharactersFromString(artist, \" \\-\\n\");\n  artist = removeInvisibleChars(artist);\n\n  const titleParts = element.querySelector('.title').innerText.split(\"\\n\");\n  const title = removeInvisibleChars(titleParts[0]);\n  const url = element.querySelector('a').getAttribute('href');\n\n  return {\n    artist: artist,\n    title: title,\n    url: (url[0] === '/' ? window.location.origin : '') + url,\n    item_id: getDataAttribute(element, 'item-id'),\n  }\n}\n\nexport function getReleasesData() {\n  const releases = [];\n  const releaseElements = document.querySelectorAll('#music-grid .music-grid-item');\n\n  releaseElements.forEach(element => {\n    const releaseData = extractDataFromMusicGridElement(element);\n    releases.push(releaseData);\n  });\n\n  return releases;\n}\n\nexport function getBandPhotoSrc() {\n  const imgBandPhoto = document.querySelector('.band-photo');\n  return imgBandPhoto.src;\n}\n\nexport function isValidBandcampURL(url) {\n  const bandcampUrl = 'bandcamp.com';\n  return url.includes(bandcampUrl);\n}\n","import { Release } from \"../app/release.js\";\nimport { isValidBandcampURL } from \"../bandcamp/modules/html.js\";\nimport { generateKeyForRelease, generateKeyForUrl, generateKeyUrlMapFromUrls, generateKeysFromUrls } from \"./key-generator.js\";\nimport { isArray, isFunction, isObject } from \"./utils.js\";\n\nconst storage = chrome.storage.local;\n\nexport function logStorage() {\n  console.log('B2D: Storage data');\n  storage.get(null, (data) => console.log(data));\n}\n\nexport function findAllReleases(onFind) {\n  storage.get(null, (data) => {\n    const releases = [];\n\n    for (const key in data) {\n      if (!data.hasOwnProperty(key) && !isObject(data[key])) {\n        continue;\n      }\n\n      try {\n        releases.push(Release.fromStorageObject(data[key]));\n      } catch (error) {\n        continue;\n      }\n    }\n\n    if (isFunction(onFind)) onFind(releases);\n  });\n}\n\nexport function findReleaseByUrl(url, onFind, onMissing) {\n  const key = generateKeyForUrl(url);\n  storage.get([key], (result) => {\n    if (isObject(result[key])) {\n      try {\n        const release = Release.fromStorageObject(result[key]);\n        if (isFunction(onFind)) onFind(release);\n      } catch (error) {\n        console.log(\"B2D: Broken storage data for release\", result[key]);\n        clearStorageByKey(key);\n      }\n    } else {\n      console.log(\"B2D: Release data doesn't exists\", key);\n      if (isFunction(onMissing)) onMissing(key);\n    }\n  });\n\n}\n\nexport function findReleasesByUrls(urls, onFind) {\n  const keys = generateKeysFromUrls(urls);\n  storage.get(keys, result => {\n    let releases = Object\n      .values(result)\n      .map(function(obj) {\n        try {\n          return Release.fromStorageObject(obj);\n        } catch (error) {\n          console.log(\"B2D: Broken storage object. \" + JSON.stringify(error), obj);\n          return null;\n        }\n      })\n      .filter(obj => obj instanceof Release);\n    if (isFunction(onFind)) onFind(releases);\n  });\n}\n\nexport function findMissingUrls(urls, onFind) {\n  const keyUrlMap = generateKeyUrlMapFromUrls(urls);\n  const keys = Object.keys(keyUrlMap);\n  storage.get(keys, result => {\n    const foundKeys = Object.keys(result);\n    const missingKeys = keys.filter(key => !foundKeys.includes(key));\n    const missingUrls = missingKeys.map(key => keyUrlMap[key]);\n    if (isFunction(onFind)) onFind(missingUrls);\n  });\n}\n\n/**\n * @param {Release} release\n */\nexport function saveRelease(release) {\n  const key = generateKeyForRelease(release);\n  storage.set({ [key]: release.toStorageObject() }, () => {\n    console.log(\"B2D: Release data was saved in the local storage\");\n  });\n}\n\n/**\n * @param {String} key\n * @param {Array} categoryValues\n */\nexport function addReleaseHistory(key, categoryValues) {\n  storage.get([key], (data) => {\n    let releaseData = data[key] || null;\n    if (releaseData === null) return;\n    let history = releaseData.history || {};\n\n    const date = new Date();\n    const dateStr = date.toISOString();\n\n    for (let category in categoryValues) {\n      if (!categoryValues.hasOwnProperty(category)) continue;\n\n      let historyCategory = history[category] || [];\n      if (!isArray(historyCategory)) continue;\n\n      const historyValue = {\n        date: dateStr,\n        value: categoryValues[category]\n      };\n\n      addUniqueValueObjectToArray(historyCategory, historyValue);\n      history[category] = historyCategory;\n    }\n\n    releaseData.history = history;\n\n    storage.set({ [key]: releaseData }, () => {\n      console.log(\"B2D: Release history for categories was saved successfully\", categoryValues);\n    });\n  });\n}\n\nfunction addUniqueValueObjectToArray(arr, obj) {\n  if (arr.length === 0 || arr[arr.length - 1].value !== obj.value) {\n      arr.push(obj);\n  }\n}\n\nexport function clearStorage() {\n  storage.clear();\n}\n\nexport function clearStorageByKey(key, onDone) {\n  isArray(key)\n    ? key.forEach(k => clearStorageByKey(k, onDone))\n    : storage.remove(key, () => {\n      if (chrome.runtime.lastError) {\n        console.error(`Error clearing local storage item with key \"${key}\": ${chrome.runtime.lastError}`);\n      }\n\n      if (isFunction(onDone)) onDone();\n    });\n}\n\nexport function getStorageSize(callable) {\n  storage.getBytesInUse(null, callable);\n}\n","import { Release, Track, TrackDuration } from \"../../app/release.js\";\nimport TrackTime from \"../../app/trackTime.js\";\nimport { getCurrentUrl } from \"../../modules/html.js\";\nimport { findReleaseByUrl, saveRelease } from \"../../modules/storage.js\";\nimport { getMusicAlbumSchemaData } from \"../modules/html.js\";\n\n// Setup logic for BC albums page\nexport function setupPageAlbum() {\n  const schema = getMusicAlbumSchemaData();\n  const release = createReleaseFromSchema(schema);\n  setupRelease(release);\n  setupSendMessageToPopup(release);\n}\n\n/**\n * @param {Object} schema\n * @returns {Release}\n */\nfunction createReleaseFromSchema(schema) {\n  const artist = schema.byArtist.name;\n  const title = schema.name;\n  const label = schema.publisher.name;\n  const datePublished = new Date(schema.datePublished);\n  const dateModified = new Date(schema.dateModified);\n  const tracks = schema.track.numberOfItems\n    ? schema.track.itemListElement.map(track => new Track(\n      track.position,\n      track.item.name,\n      TrackTime.fromDuration(track.item.duration)\n    ))\n    : [];\n  const url = schema.mainEntityOfPage;\n  const image = schema.image;\n  const keywords = schema.keywords;\n\n  return new Release(\n    artist,\n    title,\n    label,\n    datePublished,\n    dateModified,\n    tracks,\n    url,\n    image,\n    keywords\n  );\n}\n\n/**\n * @param {Release} release\n */\nfunction setupRelease(release) {\n  // Save release data to the storage if it doesn't exist\n  findReleaseByUrl(getCurrentUrl(), null, (key) => {\n    saveRelease(release);\n  });\n}\n\n/**\n * @param {Release} release\n */\nfunction setupSendMessageToPopup(release) {\n  chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n    if (request.type === 'getBandcampData') {\n      sendResponse({\n        type: 'release',\n        data: release.toStorageObject()\n      });\n    }\n\n    return true;\n  });\n}\n","import { contentChangeWithPolling, createDatalistFromArray, createElementFromHTML, input, selectElementWithContent, setDataAttribute } from \"../../modules/html.js\";\nimport { containsOneOf, splitString, isEmptyArray, countOccurrences, removeBrackets } from \"../../modules/utils.js\";\nimport { getBandPhotoSrc, getReleasesData } from \"../modules/html.js\";\n\n// Setup logic for BC music page\nexport function setupPageMusic() {\n  setupSendMessageToPopup();\n  setupIsotope();\n}\n\nfunction setupSendMessageToPopup() {\n  // Cache main data\n  window.B2D = window.B2D || {};\n  window.B2D.pageReleases = getReleasesData();\n\n  chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n    if (request.type === 'getBandcampData') {\n      sendResponse({\n        type: 'list',\n        data: window.B2D.pageReleases,\n        popup: {\n          imageSrc: getBandPhotoSrc(),\n          search: getArtistFilterValue(),\n        }\n      });\n    }\n\n    return true;\n  });\n}\n\nfunction getArtistFilterValue() {\n  const artistFilter = document.querySelector('#b2dArtistFilter');\n  return artistFilter.value;\n}\n\nfunction setupIsotope() {\n  let grid = document.querySelector('#music-grid');\n  let iso = new Isotope(grid, {\n    itemSelector: '.music-grid-item',\n    layoutMode: 'fitRows'\n  });\n\n  const releases = getReleases();\n\n  releases.forEach(release => {\n    const gridElement = grid.querySelector('[data-item-id=\"' + release.item_id + '\"]');\n    setDataAttribute(gridElement, 'filter-artist', (release.artist + ' - ' + release.title).toLowerCase());\n  });\n\n  const artistFilterWidget = createArtistFilterWidget(releases);\n  const filterBlock = createElementFromHTML(`<div class=\"b2d-widget-container\"></div>`);\n  const albumAmountWidget = createAlbumAmountWidget(releases);\n\n  filterBlock.append(artistFilterWidget);\n  filterBlock.append(albumAmountWidget);\n\n  // Prepend to the releases bandcamp page\n  document.querySelector('.leftMiddleColumns').prepend(filterBlock);\n\n  setupArtistFilterElement(artistFilterWidget, iso, albumAmountWidget);\n\n  console.log('B2D: Isotope setuped correctly');\n}\n\nfunction getReleases() {\n  // Cache main data\n  const B2D = window.B2D || {};\n\n  if (!isEmptyArray(B2D.pageReleases)) {\n    return B2D.pageReleases;\n  }\n\n  B2D.pageReleases = getReleasesData();\n\n  return B2D.pageReleases;\n}\n\nfunction setupArtistFilterElement(artistFilterElement, iso, albumAmountWidget) {\n  const artistFilter = artistFilterElement.querySelector('#b2dArtistFilter');\n\n  artistFilter.addEventListener('input', () => {\n    let selectedValue = removeBrackets(artistFilter.value);\n    artistFilter.value = selectedValue;\n\n    selectedValue = selectedValue.toLowerCase();\n    const filter = selectedValue ? `[data-filter-artist*=\"${selectedValue}\"]` : '*';\n    iso.arrange({ filter: filter });\n\n    albumAmountWidget.querySelector('.b2d-visible').innerHTML = iso.getFilteredItemElements().length;\n\n    // try to updata images\n    window.scrollBy(0, 1);\n    window.scrollBy(0, -1);\n  });\n\n\n  chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n    if (message.type === 'releases-list-search') {\n      input(artistFilter, message.search);\n    }\n  });\n\n  // Check if Bandcamp filter exists\n  const bandSelectorContainer = document.querySelector('.leftMiddleColumns .label-band-selector-container');\n\n  if (bandSelectorContainer) {\n    let bandMenuTitle = selectElementWithContent(bandSelectorContainer, '.bands-menu-title span', 'artists');\n\n    if (!bandMenuTitle) {\n      bandMenuTitle = bandSelectorContainer.querySelector('.bands-menu-title span.name');\n    }\n\n    if (bandMenuTitle) {\n      contentChangeWithPolling(bandMenuTitle, (newContent) => {\n        if (newContent === 'artists') {\n          newContent = '';\n        }\n\n        input(artistFilter, newContent);\n      }, 500);\n    }\n  }\n}\n\nfunction getArtistListData(releases) {\n  let filterData = [];\n  let artistsData = [];\n  let releasesData = [];\n\n  // add artists\n  releases.forEach((release) => {\n    if (containsOneOf(release.artist, ['V/A'])) {\n      artistsData.push(release.artist);\n    } else {\n      const artists = splitString(release.artist, /[,/+•|]| Vs | & +/);\n      artistsData.push(...artists);\n    }\n  });\n  artistsData.sort();\n  filterData.push(...countOccurrences(artistsData));\n\n  // add artists with release titles\n  releases.forEach((release) => releasesData.push(release.artist + ' - ' + release.title));\n  releasesData.sort();\n  filterData.push(...releasesData);\n\n  return [...new Set(filterData)];\n}\n\nfunction createArtistFilterWidget(releases) {\n  let artistFilterElement = createElementFromHTML(\n`<div class=\"b2d-widget\">\n  <label for=\"b2dArtistFilter\">Artist / Album:</label>\n  <input list=\"artist-filter-data\" id=\"b2dArtistFilter\" name=\"artist-filter\" />\n</div>`);\n  const artistFilterData = getArtistListData(releases);\n  const artistFilterDatalist = createDatalistFromArray(artistFilterData, 'artist-filter-data');\n\n  artistFilterElement.append(artistFilterDatalist);\n\n  return artistFilterElement;\n}\n\nfunction createAlbumAmountWidget(releases) {\n  return createElementFromHTML(\n`<div class=\"b2d-albumAmount b2d-widget\" title=\"The amount of releases on the page\">\nReleases: <span class=\"b2d-visible\">${releases.length}</span> / <span class=\"b2d-total\">${releases.length}</span>\n</div>`);\n}\n","import { injectCSSFile } from \"../../modules/html.js\";\nimport { PageTypeDetector } from \"../app/page-type.js\";\nimport { setupPageAlbum } from \"../pages/page-album.js\";\nimport { setupPageMusic } from \"../pages/page-music.js\";\n\nexport function main () {\n  const pageType = (new PageTypeDetector()).detect();\n\n  if (pageType.isMusic()) {\n    setupPageMusic();\n  } else if (pageType.isAlbum()) {\n    setupPageAlbum();\n  }\n\n  injectCSSFile(chrome.runtime.getURL('src/bandcamp/styles.css'));\n}\n\nmain();\n"],"names":["value","Object","prototype","toString","call","Array","isArray","removeInvisibleChars","inputString","replace","setDataAttribute","element","attributeName","attributeValue","obj","key","hasOwnProperty","setAttribute","getDataAttribute","defaultValue","undefined","hasAttribute","hasDataAttribute","getAttribute","input","isString","triggerInputEvent","dispatchEvent","Event","createElementFromHTML","htmlString","tempDiv","document","createElement","innerHTML","trim","firstChild","PageTypeEnum","PageType","constructor","this","isAlbum","isArtists","isCommunity","isMerch","isMusic","isTrack","isVideo","isUnknow","PageTypeDetector","url","window","location","href","detect","self","includes","querySelector","byteToHex","i","push","slice","uuid","test","TypeError","v","arr","Uint8Array","parseInt","f","s","x","y","z","ROTL","n","name","version","hashfunc","generateUUID","namespace","buf","offset","_namespace","str","unescape","encodeURIComponent","bytes","length","charCodeAt","stringToBytes","set","K","H","msg","l","N","Math","ceil","M","Uint32Array","j","pow","floor","W","t","a","b","c","d","e","T","unsafeStringify","err","DNS","URL","v35","generateKeyForUrl","TrackTime","hours","minutes","seconds","date","toDate","Intl","DateTimeFormat","hour12","hour","minute","second","format","Date","setHours","setMinutes","setSeconds","fromString","timeString","Error","split","fromDuration","duration","exec","ReleaseItem","artist","title","fromObject","releaseItem","label","published","modified","tracks","tracksQty","image","keywords","datePublished","dateModified","toStorageObject","toISOString","map","track","fromStorageObject","trackData","Track","num","time","getReleasesData","releases","querySelectorAll","forEach","releaseData","innerText","charactersToTrim","escapedCharacters","regexPattern","RegExp","trimCharactersFromString","origin","item_id","extractDataFromMusicGridElement","storage","chrome","local","findReleaseByUrl","onFind","onMissing","get","result","release","error","console","log","clearStorageByKey","onDone","k","remove","runtime","lastError","setupPageAlbum","schema","byArtist","publisher","numberOfItems","itemListElement","position","item","mainEntityOfPage","createReleaseFromSchema","jsonLdScript","JSON","parse","textContent","getMusicAlbumSchemaData","generateKeyForRelease","saveRelease","setupRelease","onMessage","addListener","request","sender","sendResponse","type","data","setupSendMessageToPopup","setupPageMusic","B2D","pageReleases","popup","imageSrc","src","search","grid","iso","Isotope","itemSelector","layoutMode","getReleases","toLowerCase","artistFilterWidget","artistFilterElement","artistFilterData","filterData","artistsData","releasesData","string1","arrayOfStrings","string2","containsOneOf","artists","delimiters","filter","sort","count","Map","items","has","countOccurrences","Set","getArtistListData","artistFilterDatalist","dataArray","datalistId","datalist","id","optionText","option","appendChild","createDatalistFromArray","append","createArtistFilterWidget","filterBlock","albumAmountWidget","createAlbumAmountWidget","prepend","artistFilter","addEventListener","selectedValue","arrange","getFilteredItemElements","scrollBy","message","bandSelectorContainer","bandMenuTitle","rootElement","content","elements","selectElementWithContent","callback","interval","previousContent","setInterval","currentContent","contentChangeWithPolling","newContent","setupArtistFilterElement","setupIsotope","pageType","cssUrl","linkElement","rel","onload","head","injectCSSFile","getURL","main"],"sourceRoot":""}